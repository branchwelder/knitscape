(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var B=typeof window<"u"?window:null,We=B===null,Ot=We?void 0:B.document,W="addEventListener",G="removeEventListener",$e="getBoundingClientRect",Mt="_a",K="_b",nt="_c",te="horizontal",Z=function(){return!1},ji=We?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=Ot.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",Wn=function(e){return typeof e=="string"||e instanceof String},un=function(e){if(Wn(e)){var t=Ot.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},R=function(e,t,n){var i=e[t];return i!==void 0?i:n},ee=function(e,t,n,i){if(t){if(i==="end")return 0;if(i==="center")return e/2}else if(n){if(i==="start")return 0;if(i==="center")return e/2}return e},tr=function(e,t){var n=Ot.createElement("div");return n.className="gutter gutter-"+t,n},er=function(e,t,n){var i={};return Wn(t)?i[e]=t:i[e]=ji+"("+t+"% - "+n+"px)",i},nr=function(e,t){var n;return n={},n[e]=t+"px",n},ir=function(e,t){if(t===void 0&&(t={}),We)return{};var n=e,i,r,s,o,a,l;Array.from&&(n=Array.from(n));var c=un(n[0]),h=c.parentNode,f=getComputedStyle?getComputedStyle(h):null,d=f?f.flexDirection:null,u=R(t,"sizes")||n.map(function(){return 100/n.length}),_=R(t,"minSize",100),p=Array.isArray(_)?_:n.map(function(){return _}),g=R(t,"maxSize",1/0),y=Array.isArray(g)?g:n.map(function(){return g}),x=R(t,"expandToMin",!1),S=R(t,"gutterSize",10),w=R(t,"gutterAlign","center"),k=R(t,"snapOffset",30),E=Array.isArray(k)?k:n.map(function(){return k}),z=R(t,"dragInterval",1),A=R(t,"direction",te),T=R(t,"cursor",A===te?"col-resize":"row-resize"),b=R(t,"gutter",tr),C=R(t,"elementStyle",er),H=R(t,"gutterStyle",nr);A===te?(i="width",r="clientX",s="left",o="right",a="clientWidth"):A==="vertical"&&(i="height",r="clientY",s="top",o="bottom",a="clientHeight");function M($,v,m,N){var D=C(i,v,m,N);Object.keys(D).forEach(function(P){$.style[P]=D[P]})}function q($,v,m){var N=H(i,v,m);Object.keys(N).forEach(function(D){$.style[D]=N[D]})}function L(){return l.map(function($){return $.size})}function ot($){return"touches"in $?$.touches[0][r]:$[r]}function an($){var v=l[this.a],m=l[this.b],N=v.size+m.size;v.size=$/this.size*N,m.size=N-$/this.size*N,M(v.element,v.size,this[K],v.i),M(m.element,m.size,this[nt],m.i)}function Wi($){var v,m=l[this.a],N=l[this.b];this.dragging&&(v=ot($)-this.start+(this[K]-this.dragOffset),z>1&&(v=Math.round(v/z)*z),v<=m.minSize+m.snapOffset+this[K]?v=m.minSize+this[K]:v>=this.size-(N.minSize+N.snapOffset+this[nt])&&(v=this.size-(N.minSize+this[nt])),v>=m.maxSize-m.snapOffset+this[K]?v=m.maxSize+this[K]:v<=this.size-(N.maxSize-N.snapOffset+this[nt])&&(v=this.size-(N.maxSize+this[nt])),an.call(this,v),R(t,"onDrag",Z)(L()))}function ln(){var $=l[this.a].element,v=l[this.b].element,m=$[$e](),N=v[$e]();this.size=m[i]+N[i]+this[K]+this[nt],this.start=m[s],this.end=m[o]}function Gi($){if(!getComputedStyle)return null;var v=getComputedStyle($);if(!v)return null;var m=$[a];return m===0?null:(A===te?m-=parseFloat(v.paddingLeft)+parseFloat(v.paddingRight):m-=parseFloat(v.paddingTop)+parseFloat(v.paddingBottom),m)}function cn($){var v=Gi(h);if(v===null||p.reduce(function(P,F){return P+F},0)>v)return $;var m=0,N=[],D=$.map(function(P,F){var ht=v*P/100,Qt=ee(S,F===0,F===$.length-1,w),jt=p[F]+Qt;return ht<jt?(m+=jt-ht,N.push(0),jt):(N.push(ht-jt),ht)});return m===0?$:D.map(function(P,F){var ht=P;if(m>0&&N[F]-m>0){var Qt=Math.min(m,N[F]-m);m-=Qt,ht=P-Qt}return ht/v*100})}function Ki(){var $=this,v=l[$.a].element,m=l[$.b].element;$.dragging&&R(t,"onDragEnd",Z)(L()),$.dragging=!1,B[G]("mouseup",$.stop),B[G]("touchend",$.stop),B[G]("touchcancel",$.stop),B[G]("mousemove",$.move),B[G]("touchmove",$.move),$.stop=null,$.move=null,v[G]("selectstart",Z),v[G]("dragstart",Z),m[G]("selectstart",Z),m[G]("dragstart",Z),v.style.userSelect="",v.style.webkitUserSelect="",v.style.MozUserSelect="",v.style.pointerEvents="",m.style.userSelect="",m.style.webkitUserSelect="",m.style.MozUserSelect="",m.style.pointerEvents="",$.gutter.style.cursor="",$.parent.style.cursor="",Ot.body.style.cursor=""}function Zi($){if(!("button"in $&&$.button!==0)){var v=this,m=l[v.a].element,N=l[v.b].element;v.dragging||R(t,"onDragStart",Z)(L()),$.preventDefault(),v.dragging=!0,v.move=Wi.bind(v),v.stop=Ki.bind(v),B[W]("mouseup",v.stop),B[W]("touchend",v.stop),B[W]("touchcancel",v.stop),B[W]("mousemove",v.move),B[W]("touchmove",v.move),m[W]("selectstart",Z),m[W]("dragstart",Z),N[W]("selectstart",Z),N[W]("dragstart",Z),m.style.userSelect="none",m.style.webkitUserSelect="none",m.style.MozUserSelect="none",m.style.pointerEvents="none",N.style.userSelect="none",N.style.webkitUserSelect="none",N.style.MozUserSelect="none",N.style.pointerEvents="none",v.gutter.style.cursor=T,v.parent.style.cursor=T,Ot.body.style.cursor=T,ln.call(v),v.dragOffset=ot($)-v.end}}u=cn(u);var ct=[];l=n.map(function($,v){var m={element:un($),size:u[v],minSize:p[v],maxSize:y[v],snapOffset:E[v],i:v},N;if(v>0&&(N={a:v-1,b:v,dragging:!1,direction:A,parent:h},N[K]=ee(S,v-1===0,!1,w),N[nt]=ee(S,!1,v===n.length-1,w),d==="row-reverse"||d==="column-reverse")){var D=N.a;N.a=N.b,N.b=D}if(v>0){var P=b(v,A,m.element);q(P,S,v),N[Mt]=Zi.bind(N),P[W]("mousedown",N[Mt]),P[W]("touchstart",N[Mt]),h.insertBefore(P,m.element),N.gutter=P}return M(m.element,m.size,ee(S,v===0,v===n.length-1,w),v),v>0&&ct.push(N),m});function hn($){var v=$.i===ct.length,m=v?ct[$.i-1]:ct[$.i];ln.call(m);var N=v?m.size-$.minSize-m[nt]:$.minSize+m[K];an.call(m,N)}l.forEach(function($){var v=$.element[$e]()[i];v<$.minSize&&(x?hn($):$.minSize=v)});function Ji($){var v=cn($);v.forEach(function(m,N){if(N>0){var D=ct[N-1],P=l[D.a],F=l[D.b];P.size=v[N-1],F.size=m,M(P.element,P.size,D[K],P.i),M(F.element,F.size,D[nt],F.i)}})}function Qi($,v){ct.forEach(function(m){if(v!==!0?m.parent.removeChild(m.gutter):(m.gutter[G]("mousedown",m[Mt]),m.gutter[G]("touchstart",m[Mt])),$!==!0){var N=C(i,m.a.size,m[K]);Object.keys(N).forEach(function(D){l[m.a].element.style[D]="",l[m.b].element.style[D]=""})}})}return{setSizes:Ji,getSizes:L,collapse:function(v){hn(l[v])},destroy:Qi,parent:h,pairs:ct}};class ne{constructor({paneEvents:t,id:n,split:i,close:r,paneDom:s,manager:o}){this.id=n,this.dom=document.createElement("div"),this.dom.classList.add("pane-container","dropzone"),this.dom.id=`${this.id}-container`,this.manager=o,this.dom.appendChild(this.createToolbar(i,r)),this.paneDom=s??document.createElement("div"),this.paneDom.id=this.id,this.paneDom.classList.add("pane"),this.dom.appendChild(this.paneDom),t&&Object.entries(t).forEach(([a,l])=>this.dom[a]=c=>l(c,this.id))}createToolbar(t,n){const i=document.createElement("div");i.classList.add("pane-toolbar"),i.draggable=!0;const r=document.createElement("button");r.onclick=()=>t("horizontal"),r.innerText="=",i.appendChild(r);const s=document.createElement("button");s.onclick=()=>t("vertical"),s.innerText="||",i.appendChild(s);const o=document.createElement("button");return o.onclick=()=>n(),o.innerText="X",i.appendChild(o),i}saveLayout(){return this.manager.paneMap[this.id]}}class xt{constructor(t,n,{sizes:i,direction:r="horizontal",id:s,collapse:o}){t.length<2&&console.warn("Problem building split layout: SplitGroups must have at least two children"),this.manager=n,this.direction=r,this.id=s,this.sizes=i,this.collapse=o,this.currentSplitID=0,this.dom=document.createElement("div"),this.dom.id=this.id,this.dom.classList.add(r),this.children=t.map(a=>this.createChild(a)),this.children.forEach(a=>this.dom.appendChild(a.dom)),this.split,this.updateSplit()}createSplit(t){const n=`${this.id}-${this.currentSplitID}`;return this.currentSplitID++,new xt(t.children,this.manager,{id:n,sizes:t.sizes,direction:this.oppositeAxis(),collapse:i=>this.collapseSplitGroup(n,i)})}adoptSplit(t){const n=`${this.id}-${this.currentSplitID}`;return this.currentSplitID++,t.id=n,t.collapse=i=>this.collapseSplitGroup(n,i),t}createPane({id:t,paneDom:n}){return new ne({id:t,paneDom:n,manager:this.manager,paneEvents:this.manager.paneEvents,split:i=>i==this.direction?this.convertPaneToSplit(t):this.insertChild(this.createChild("empty"),this.getChildIndex(t)),close:()=>this.closePane(t)})}createChild(t){return t instanceof ne?this.createPane({id:t.id,paneDom:t.paneDom}):t instanceof xt?this.adoptSplit(t):t.children?this.createSplit(t):this.createPane({id:this.manager.registerPane(t)})}updateSplit(){if(this.split&&this.split.destroy(),this.sizes.length!=this.children.length)throw new Error("Error: Children array out of sync with sizes");let t=100/this.sizes.reduce((n,i)=>n+i,0);this.sizes=this.sizes.map(n=>n*t),this.split=ir(this.dom.children,{direction:this.direction,gutterSize:2,sizes:this.sizes,onDragEnd:n=>this.sizes=n})}convertPaneToSplit(t){const n=this.getChildIndex(t),i=this.children.splice(n,1)[0],r=this.createSplit({children:[i,"empty"],sizes:[50,50]});this.children.splice(n,0,r),i.dom.replaceWith(r.dom),this.updateSplit(),this.manager.sync()}insertChild(t,n){this.children.splice(n+1,0,t),this.children[n].dom.after(t.dom),this.sizes.splice(n,0,this.sizes[n]),this.updateSplit(),this.manager.sync()}oppositeAxis(){return this.direction=="horizontal"?"vertical":"horizontal"}getChildIndex(t){return this.children.findIndex(n=>n.id==t)}collapseSplitGroup(t,n){const i=this.getChildIndex(t);if(n instanceof ne){const r=this.createPane({id:n.id,paneDom:n.paneDom});this.children.splice(i,1,r)[0].dom.replaceWith(r.dom)}else if(n instanceof xt){const r=n.children.map(l=>{if(l instanceof ne)return this.createPane({id:l.id,paneDom:l.paneDom});if(l instanceof xt)return this.adoptSplit(l);console.error("Error collapsing SplitGroup: Encountered grandchild that is not a Pane or SplitGroup")});this.children.splice(i,1,...r)[0].dom.replaceWith(...r.map(l=>l.dom));const a=n.sizes.map(l=>l*this.sizes[i]/100);this.sizes.splice(i,1,...a)}this.updateSplit()}closePane(t){if(this.id=="root"&&this.children.length==1)return;const n=this.getChildIndex(t),i=this.children.splice(n,1)[0];this.sizes.splice(n,1)[0],this.manager.removePane(i),this.children.length==1&&this.id!="root"?this.collapse(this.children[0]):this.updateSplit()}saveLayout(){return{sizes:this.sizes,children:this.children.map(t=>t.saveLayout())}}}class rr{constructor(t,n,i,r){this.currentPaneID=0,this.paneMap={},this.sync=()=>i(this.paneMap),this.initPane=r,this.paneEvents={ondrop:(s,o)=>this.onDropInPane(s,o),ondragover:(s,o)=>this.onDragOverPane(s,o),ondragenter:(s,o)=>this.onDragEnterPane(s,o),ondragleave:(s,o)=>this.onDragLeavePane(s,o),ondragstart:(s,o)=>this.onStartDragPane(s,o)},this.loadLayout(t),n.appendChild(this.root.dom)}registerPane(t){const n=`pane-${this.currentPaneID}`;return this.currentPaneID++,this.paneMap[n]=t,n}removePane(t){t.dom.remove(),delete this.paneMap[t.id]}onStartDragPane(t,n){t.dataTransfer.setData("pane-data",this.paneMap[n]),t.dataTransfer.setData("source-pane",n),t.dataTransfer.setDragImage(t.currentTarget,10,10)}onDropInPane(t,n){t.preventDefault(),t.currentTarget.classList.remove("targeted");const i=t.dataTransfer.getData("pane-data"),r=t.dataTransfer.getData("pane-type"),s=t.dataTransfer.getData("source-pane");s&&(this.paneMap[s]=this.paneMap[n]),this.paneMap[n]=i,this.initPane(n,i,r),s&&this.initPane(s,this.paneMap[s],r),this.sync()}onDragOverPane(t,n){t.preventDefault()}onDragEnterPane(t,n){t.currentTarget.classList.contains("dropzone")&&t.currentTarget.classList.add("targeted")}onDragLeavePane(t,n){t.currentTarget.contains(t.relatedTarget)||t.currentTarget.classList.contains("dropzone")&&t.currentTarget.classList.remove("targeted")}saveLayout(){return console.log(this.paneMap),this.root.saveLayout()}loadLayout(t){this.currentPaneID=0,this.paneMap={},this.root=new xt(t.children,this,{id:"root",sizes:t.sizes})}attachPaneDropData(t,n,i){typeof n!="string"&&console.warn("Warning: I haven't tried non-string pane data"),t.dataTransfer.setData("pane-data",n),t.dataTransfer.setData("pane-type",i)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ae;const he=window,Nt=he.trustedTypes,fn=Nt?Nt.createPolicy("lit-html",{createHTML:e=>e}):void 0,Ee="$lit$",lt=`lit$${(Math.random()+"").slice(9)}$`,Gn="?"+lt,sr=`<${Gn}>`,_t=document,Vt=()=>_t.createComment(""),Yt=e=>e===null||typeof e!="object"&&typeof e!="function",Kn=Array.isArray,or=e=>Kn(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Se=`[ 	
\f\r]`,Et=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dn=/-->/g,pn=/>/g,ut=RegExp(`>|${Se}(?:([^\\s"'>=/]+)(${Se}*=${Se}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),gn=/'/g,_n=/"/g,Zn=/^(?:script|style|textarea|title)$/i,ar=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),st=ar(1),Ft=Symbol.for("lit-noChange"),I=Symbol.for("lit-nothing"),vn=new WeakMap,dt=_t.createTreeWalker(_t,129,null,!1);function Jn(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return fn!==void 0?fn.createHTML(t):t}const lr=(e,t)=>{const n=e.length-1,i=[];let r,s=t===2?"<svg>":"",o=Et;for(let a=0;a<n;a++){const l=e[a];let c,h,f=-1,d=0;for(;d<l.length&&(o.lastIndex=d,h=o.exec(l),h!==null);)d=o.lastIndex,o===Et?h[1]==="!--"?o=dn:h[1]!==void 0?o=pn:h[2]!==void 0?(Zn.test(h[2])&&(r=RegExp("</"+h[2],"g")),o=ut):h[3]!==void 0&&(o=ut):o===ut?h[0]===">"?(o=r??Et,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,c=h[1],o=h[3]===void 0?ut:h[3]==='"'?_n:gn):o===_n||o===gn?o=ut:o===dn||o===pn?o=Et:(o=ut,r=void 0);const u=o===ut&&e[a+1].startsWith("/>")?" ":"";s+=o===Et?l+sr:f>=0?(i.push(c),l.slice(0,f)+Ee+l.slice(f)+lt+u):l+lt+(f===-2?(i.push(void 0),a):u)}return[Jn(e,s+(e[n]||"<?>")+(t===2?"</svg>":"")),i]};class Xt{constructor({strings:t,_$litType$:n},i){let r;this.parts=[];let s=0,o=0;const a=t.length-1,l=this.parts,[c,h]=lr(t,n);if(this.el=Xt.createElement(c,i),dt.currentNode=this.el.content,n===2){const f=this.el.content,d=f.firstChild;d.remove(),f.append(...d.childNodes)}for(;(r=dt.nextNode())!==null&&l.length<a;){if(r.nodeType===1){if(r.hasAttributes()){const f=[];for(const d of r.getAttributeNames())if(d.endsWith(Ee)||d.startsWith(lt)){const u=h[o++];if(f.push(d),u!==void 0){const _=r.getAttribute(u.toLowerCase()+Ee).split(lt),p=/([.?@])?(.*)/.exec(u);l.push({type:1,index:s,name:p[2],strings:_,ctor:p[1]==="."?hr:p[1]==="?"?fr:p[1]==="@"?dr:ye})}else l.push({type:6,index:s})}for(const d of f)r.removeAttribute(d)}if(Zn.test(r.tagName)){const f=r.textContent.split(lt),d=f.length-1;if(d>0){r.textContent=Nt?Nt.emptyScript:"";for(let u=0;u<d;u++)r.append(f[u],Vt()),dt.nextNode(),l.push({type:2,index:++s});r.append(f[d],Vt())}}}else if(r.nodeType===8)if(r.data===Gn)l.push({type:2,index:s});else{let f=-1;for(;(f=r.data.indexOf(lt,f+1))!==-1;)l.push({type:7,index:s}),f+=lt.length-1}s++}}static createElement(t,n){const i=_t.createElement("template");return i.innerHTML=t,i}}function kt(e,t,n=e,i){var r,s,o,a;if(t===Ft)return t;let l=i!==void 0?(r=n._$Co)===null||r===void 0?void 0:r[i]:n._$Cl;const c=Yt(t)?void 0:t._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((s=l==null?void 0:l._$AO)===null||s===void 0||s.call(l,!1),c===void 0?l=void 0:(l=new c(e),l._$AT(e,n,i)),i!==void 0?((o=(a=n)._$Co)!==null&&o!==void 0?o:a._$Co=[])[i]=l:n._$Cl=l),l!==void 0&&(t=kt(e,l._$AS(e,t.values),l,i)),t}class cr{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var n;const{el:{content:i},parts:r}=this._$AD,s=((n=t==null?void 0:t.creationScope)!==null&&n!==void 0?n:_t).importNode(i,!0);dt.currentNode=s;let o=dt.nextNode(),a=0,l=0,c=r[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new Gt(o,o.nextSibling,this,t):c.type===1?h=new c.ctor(o,c.name,c.strings,this,t):c.type===6&&(h=new pr(o,this,t)),this._$AV.push(h),c=r[++l]}a!==(c==null?void 0:c.index)&&(o=dt.nextNode(),a++)}return dt.currentNode=_t,s}v(t){let n=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,n),n+=i.strings.length-2):i._$AI(t[n])),n++}}class Gt{constructor(t,n,i,r){var s;this.type=2,this._$AH=I,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=r,this._$Cp=(s=r==null?void 0:r.isConnected)===null||s===void 0||s}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=kt(this,t,n),Yt(t)?t===I||t==null||t===""?(this._$AH!==I&&this._$AR(),this._$AH=I):t!==this._$AH&&t!==Ft&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):or(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==I&&Yt(this._$AH)?this._$AA.nextSibling.data=t:this.$(_t.createTextNode(t)),this._$AH=t}g(t){var n;const{values:i,_$litType$:r}=t,s=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Xt.createElement(Jn(r.h,r.h[0]),this.options)),r);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.v(i);else{const o=new cr(s,this),a=o.u(this.options);o.v(i),this.$(a),this._$AH=o}}_$AC(t){let n=vn.get(t.strings);return n===void 0&&vn.set(t.strings,n=new Xt(t)),n}T(t){Kn(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,r=0;for(const s of t)r===n.length?n.push(i=new Gt(this.k(Vt()),this.k(Vt()),this,this.options)):i=n[r],i._$AI(s),r++;r<n.length&&(this._$AR(i&&i._$AB.nextSibling,r),n.length=r)}_$AR(t=this._$AA.nextSibling,n){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,n);t&&t!==this._$AB;){const r=t.nextSibling;t.remove(),t=r}}setConnected(t){var n;this._$AM===void 0&&(this._$Cp=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}}class ye{constructor(t,n,i,r,s){this.type=1,this._$AH=I,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=I}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,i,r){const s=this.strings;let o=!1;if(s===void 0)t=kt(this,t,n,0),o=!Yt(t)||t!==this._$AH&&t!==Ft,o&&(this._$AH=t);else{const a=t;let l,c;for(t=s[0],l=0;l<s.length-1;l++)c=kt(this,a[i+l],n,l),c===Ft&&(c=this._$AH[l]),o||(o=!Yt(c)||c!==this._$AH[l]),c===I?t=I:t!==I&&(t+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!r&&this.j(t)}j(t){t===I?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class hr extends ye{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===I?void 0:t}}const ur=Nt?Nt.emptyScript:"";class fr extends ye{constructor(){super(...arguments),this.type=4}j(t){t&&t!==I?this.element.setAttribute(this.name,ur):this.element.removeAttribute(this.name)}}class dr extends ye{constructor(t,n,i,r,s){super(t,n,i,r,s),this.type=5}_$AI(t,n=this){var i;if((t=(i=kt(this,t,n,0))!==null&&i!==void 0?i:I)===Ft)return;const r=this._$AH,s=t===I&&r!==I||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==I&&(r===I||s);s&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,i;typeof this._$AH=="function"?this._$AH.call((i=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&i!==void 0?i:this.element,t):this._$AH.handleEvent(t)}}class pr{constructor(t,n,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){kt(this,t)}}const yn=he.litHtmlPolyfillSupport;yn==null||yn(Xt,Gt),((Ae=he.litHtmlVersions)!==null&&Ae!==void 0?Ae:he.litHtmlVersions=[]).push("2.7.5");const yt=(e,t,n)=>{var i,r;const s=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:t;let o=s._$litPart$;if(o===void 0){const a=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:null;s._$litPart$=o=new Gt(t.insertBefore(Vt(),a),a,void 0,n??{})}return o._$AI(e),o};class tt{constructor(t,n,i,r){if(r){if(Math.log2(t.length)>r)throw new Error("Error creating Palette: too many entries for specified bit depth");this.bitDepth=r}else this.bitDepth=Math.ceil(Math.log2(t.length));this.entries=t.map(s=>{if(typeof s!=typeof t[0])throw new Error("All palette entries must be the same type!");return s}),this.scale=n??[1,1],this.drawFunc=i}addEntry(t){this.entries.push(t)}static getRGB([t,n,i]){try{return`rgb(${t} ${n} ${i})`}catch{return console.warn("Can't destructure palette entries to RGB"),"rgb(0 0 0)"}}getRGBA(t){try{const[n,i,r,s]=this.entries[t];return`rgb(${n} ${i} ${r} / ${s})`}catch{return console.warn("Can't destructure palette entries to RGBA"),"rgb(0 0 0 / 0)"}}draw(t,n,i,r){try{this.drawFunc(n,this.entries[t],i,r,t)}catch(s){console.error("Error in palette draw function!",s)}}}class me extends tt{constructor(t){super(t,[1,1]),this.drawFunc=this.drawPixel}drawPixel(t,n,i,r){t.fillStyle=tt.getRGB(n),t.fillRect(0,0,1,1)}}const Kt=[[0,0,0],[255,255,255]],gr=[[0,0,0],[1,0,0],[0,1,0],[0,0,1]],_r=[[0,0,0],[255,0,0],[0,255,0],[0,0,255],[255,0,255],[255,255,0],[0,255,255],[255,255,255]],vr=[[0,0,0],[1,0,0],[0,1,0],[0,0,1],[1,0,1],[1,1,0],[0,1,1],[1,1,1],[0,0,0],[1,0,0],[0,1,0],[0,0,1],[1,0,1],[1,1,0],[0,1,1],[1,1,1]];function yr(e,t,n,i){e.fillStyle=tt.getRGB(t),e.beginPath(),e.arc(this.scale[0]/2,this.scale[1]/2,Math.abs(this.scale[0]/2-n),0,2*Math.PI),e.fill()}function Ne(e,t,n,i,r){const s=e.createLinearGradient(t[0],t[1],n[0],n[1]);return s.addColorStop(0,i),s.addColorStop(1,r),s}function mr(e,t,n,i,r){e.lineWidth=18,e.lineCap="round",e.strokeStyle="#ff9e0d",e.fillStyle="#404040",this.scale[0]/4,3*this.scale/4,e.fillRect(0,0,this.scale[0],this.scale[0]);const s="#ff9e0d",o="#cf7e06";if(r==0){const a=[0,85],l=[40,60],c=Ne(e,a,l,o,s);e.strokeStyle=c,e.beginPath(),e.moveTo(a[0],a[1]),e.bezierCurveTo(25,85,30,75,l[0],l[1]),e.stroke();const h=[100,85],f=[60,60],d=Ne(e,h,f,o,s);e.strokeStyle=d,e.beginPath(),e.moveTo(h[0],h[1]),e.bezierCurveTo(75,85,70,75,f[0],f[1]),e.stroke();const u=Ne(e,[50,25],[50,75],o,s);e.strokeStyle=u,e.beginPath(),e.moveTo(20,100),e.bezierCurveTo(0,0,100,0,80,100),e.stroke(),e.strokeStyle=s,e.beginPath(),e.moveTo(l[0],l[1]),e.bezierCurveTo(50,20,20,20,20,0),e.stroke(),e.beginPath(),e.moveTo(f[0],f[1]),e.bezierCurveTo(50,20,80,20,80,0),e.stroke()}else r==1&&(e.strokeStyle=o,e.beginPath(),e.moveTo(0,85),e.lineTo(100,85),e.stroke(),e.strokeStyle=s,e.beginPath(),e.moveTo(20,100),e.lineTo(20,0),e.stroke(),e.beginPath(),e.moveTo(80,100),e.lineTo(80,0),e.stroke())}function wr(e,t){e.fillStyle=tt.getRGB(t),e.fillRect(0,0,1,1)}new tt(Kt,[20,20]);new tt(gr,[20,20]);new tt(vr,[20,20]);const bt=new me(Kt);new me([[0,87,72],[91,240,203],[0,0,0],[0,255,255]]);new me(_r);new tt(Kt,[100,100],yr);new tt(Kt,[100,100],mr);new tt(Kt,[1,1],wr);class U{constructor(t,n,i){this.width=t,this.height=n,this.pixels=new Uint8ClampedArray(i)}static empty(t,n,i){let r=new Array(t*n).fill(i);return new U(t,n,r)}static fromTile(t,n,i){let r=[];for(let s=0;s<n;s++)for(let o=0;o<t;o++)r.push(i.pixel(o%i.width,s%i.height));return new U(t,n,r)}static fromImage(t){const n=document.createElement("canvas"),i=n.getContext("2d"),r=t.width,s=t.height;n.width=r,n.height=s,i.drawImage(t,0,0);const o=i.getImageData(0,0,r,s).data,a=[],l={},c=[];for(let d=0;d<o.length;d+=4){const u=[o[d],o[d+1],o[d+2]],_=u.toString();_ in l||(a.push(u),l[_]=a.length-1),c.push(l[_])}const h=new me(a);return{bitmap:new U(r,s,c),palette:h}}resize(t,n){let i=[];for(let r=0;r<n;r++)for(let s=0;s<t;s++)r>=this.height||s>=this.width?i.push(0):i.push(this.pixel(s,r));return new U(t,n,i)}make2d(){let t=Array.from(this.pixels).slice(),n=[];for(;t.length>0;)n.push(t.splice(0,this.width));return n}vMirror(){return this.make2d().map(t=>t.toReversed()).flat()}pixel(t,n){return t>this.width-1||t<0||n>this.height-1||n<0?-1:this.pixels.at(t+n*this.width)}draw(t){let n=this.pixels.slice();for(let{x:i,y:r,color:s}of t)n[i+r*this.width]=s;return new U(this.width,this.height,n)}brush({x:t,y:n},i){let r={x:t,y:n,color:i};return this.draw([r])}flood({x:t,y:n},i){const r=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];let s=this.pixel(t,n),o=[{x:t,y:n,color:i}];for(let a=0;a<o.length;a++)for(let{dx:l,dy:c}of r){let h=o[a].x+l,f=o[a].y+c;h>=0&&h<this.width&&f>=0&&f<this.height&&this.pixel(h,f)==s&&!o.some(d=>d.x==h&&d.y==f)&&o.push({x:h,y:f,color:i})}return this.draw(o)}rect(t,n,i){let r=Math.min(t.x,n.x),s=Math.min(t.y,n.y),o=Math.max(t.x,n.x),a=Math.max(t.y,n.y),l=[];for(let c=s;c<=a;c++)for(let h=r;h<=o;h++)l.push({x:h,y:c,color:i});return this.draw(l)}line(t,n,i){let r=[];if(Math.abs(t.x-n.x)>Math.abs(t.y-n.y)){t.x>n.x&&([t,n]=[n,t]);let s=(n.y-t.y)/(n.x-t.x);for(let{x:o,y:a}=t;o<=n.x;o++)r.push({x:o,y:Math.round(a),color:i}),a+=s}else{t.y>n.y&&([t,n]=[n,t]);let s=(n.x-t.x)/(n.y-t.y);for(let{x:o,y:a}=t;a<=n.y;a++)r.push({x:Math.round(o),y:a,color:i}),o+=s}return this.draw(r)}}class ze{constructor(t,n){this.bitmap=null,this.palette=n,this.offscreenCanvas=new OffscreenCanvas(t.width*this.palette.scale[0],t.height*this.palette.scale[1]),this.ctx=this.offscreenCanvas.getContext("2d"),this.updateOffscreenCanvas(t,n)}updateOffscreenCanvas(t,n){this.bitmap!=t&&(this.draw(t,n),this.bitmap=t,this.palette=n)}transferOffscreenToCanvas(t){if(!(!this.bitmap||this.bitmap.width==0||this.bitmap.height==0)){t.width=this.bitmap.width*this.palette.scale[0],t.height=this.bitmap.height*this.palette.scale[1];try{const n=t.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(this.offscreenCanvas,0,0)}catch{console.log("error drawing to canvas")}}}draw(t,n){(this.bitmap==null||this.bitmap.width!=t.width||this.bitmap.height!=t.height)&&(this.offscreenCanvas.width=t.width*this.palette.scale[0],this.offscreenCanvas.height=t.height*this.palette.scale[1],this.bitmap=null);for(let i=0;i<t.height;i++)for(let r=0;r<t.width;r++){let s=t.pixel(r,i);(this.bitmap==null||this.bitmap.pixel(r,i)!=s)&&(this.ctx.translate(r*this.palette.scale[0],i*this.palette.scale[1]),n.draw(s,this.ctx,r,i),this.ctx.setTransform(1,0,0,1,0,0))}}}const xr={triangle:[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,0],beetle:[0,0,0,1,0,1,0,0,0,1,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,1,0,1,0,1,1,1,1,0,1,1,0,0,0,0,0,1,0,1,0,1,1,0,1,0,1,0,1,1,0,1,0,0,0,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,0,1,1,1,0],test:[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0]},Qn=e=>e.composedPath()[0],br=(e,t)=>Qn(e).matches(t),jn=e=>(t,n,i,r)=>{e.addEventListener(t,s=>{s.trigger=Qn(s),(n===""||br(s,n))&&i(s)},r??{})},ti=(e,t)=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d"),r=e.toImageData(t);return i.putImageData(r,0,0),n},$r=(e,t)=>ti(e,t).toDataURL("image/jpeg",1),Ar=(e,t)=>ti(e,t).toDataURL("image/png"),Sr=(e,t)=>{const n={pixels:e.pixels,width:e.width,height:e.height,palette:t};return"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n))},Nr=(e,t)=>{const n=`SilverKnit
`+e.make2d().map(i=>i.join("")).join(`
`);return"data:text/plain;charset=utf-8,"+encodeURIComponent(n)},Pe={txt:Nr,json:Sr,png:Ar,jpg:$r};let ie=null;function kr(e,t){const n=(function(){}).constructor,i=Object.keys(e),r=Object.values(e);return new n(...i,t)(...r)}function mn(e,t){t||(t=0);const n=[...e],i=[];for(let r=0;r<n.length;r++){const s=n[r];if(r<t)i.push(s.bitmap);else if(s.type=="code"){let o;try{o=kr({Bimp:U,layers:i},s.program),i.push(o),s.bitmap=o}catch(a){console.log("Error in layer",r),console.error(a)}}else i.push(s.bitmap);s.canvas.updateOffscreenCanvas(s.bitmap,s.palette)}return n}const Tr={undo:e=>e.history.length===0?{}:{changes:{bitmap:e.history[0],history:e.history.slice(1)}},addCodeLayer:(e,t,n)=>{const i=U.empty(10,10,0),r=[...e.layers];r.push({id:"testcode",type:"code",bitmap:i,palette:bt,program:`const width = 10;
const height = 10;
const pixels = new Array(width * height).fill(0);

return new Bimp(width, height, pixels);`,canvas:new ze(i,bt)});const s=e.layers.length;return{changes:{layers:mn(r)},postRender:()=>{n("setActiveLayer",s)}}},newMotif:(e,t,n)=>{const i=U.empty(10,10,0),r={...e.motifs};return r[`motif${e.motifCounter}`]={bitmap:i,bimpCanvas:new ze(i,bt),palette:bt},{changes:{motifs:r,motifCounter:e.motifCounter+1}}},refreshCanvas:e=>{const t=[...e.layers];return t.forEach(n=>{n.canvas.bitmap=null,n.canvas.updateOffscreenCanvas(n.bitmap,n.palette)}),{changes:{layers:t}}},updateColor:(e,{paletteIndex:t,index:n,newVal:i},r)=>{const s=[...e.layers];let o=s[e.activeLayer].palette;return o.entries[t][n]=Number(i),s[e.activeLayer].palette=o,{changes:{layers:s},postRender:()=>r("refreshCanvas")}},executeTimeout:(e,t,n)=>(ie&&clearTimeout(ie),ie=setTimeout(()=>n("execute"),500),{changes:{}}),execute:e=>(ie=null,{changes:{layers:mn(e.layers)}}),setProgram:(e,{program:t},n)=>{const i=[...e.layers];return i[e.activeLayer].program=t,{changes:{layers:i},postRender:()=>n("executeTimeout")}},editMotif:(e,{bitmap:t,motifID:n},i)=>{const r={...e.motifs},s=r[n];return s.bitmap=t,s.bimpCanvas.updateOffscreenCanvas(s.bitmap,s.palette),{changes:{motifs:r}}},snapshot:e=>(console.log("SNAP"),{changes:{}}),resizeMotif:(e,[t,n,i],r)=>{const s={...e.motifs};return s[i].bitmap=s[i].bitmap.resize(t,n),{changes:{motifs:s}}},copyPixelArray:e=>(navigator.clipboard.writeText(e.layers[e.activeLayer].bitmap.pixels),{changes:{}}),download:(e,t)=>{if(!Pe.hasOwnProperty(t)){console.log("Oops! I don't know how to export to",t);return}const n=e.layers[e.activeLayer];let i=document.createElement("a");return i.setAttribute("href",Pe[t](n.bitmap,n.palette)),i.setAttribute("download",`${e.title}.${t}`),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),{changes:{}}}},Ie="ECN",It="PCN",mt="ACN",zt="UACN",Cr="K",Mr="P",wn="T",xn="M";class Er{constructor(t,n,i=!0){if(this.width=2*t,this.height=n+1,this.contacts=Array.from({length:this.width*this.height},()=>[null,Ie,[null,null]]),i)for(let r=0;r<this.width;r++)this.setAV(r,0,It),this.setMV(r,0,[0,0])}getST(t,n){return this.neighborhood(t,n)[0]}setSt(t,n,i){this.neighborhood(t,n)[0]=i}getAV(t,n){return this.neighborhood(t,n)[1]}setAV(t,n,i){this.neighborhood(t,n)[1]=i}getMV(t,n){return this.neighborhood(t,n)[2]}getDeltaI(t,n){return this.neighborhood(t,n)[2][0]}getDeltaJ(t,n){return this.neighborhood(t,n)[2][1]}setMV(t,n,i){this.neighborhood(t,n)[2]=i}setDeltaJ(t,n,i){this.neighborhood(t,n)[2][1]=i}setDeltaI(t,n,i){this.neighborhood(t,n)[2][0]=i}neighborhood(t,n){return this.contacts[n*this.width+t]}}class ei{constructor(t){this.instructions=t,this.width=t.width,this.height=t.height,this.cn=new Er(this.width,this.height),this.populateContacts()}handleKPLower(t,n,i){this.cn.setSt(t,n,i);const r=this.cn.getAV(t,n),s=this.cn.getMV(t,n);r==It&&s[0]===0&&this.cn.setAV(t,n,mt),r==zt&&((this.cn.getAV(t+1,n-1)==mt&&this.cn.getMV(t+1,n-1)[1]==0||this.cn.getAV(t-1,n-1)==mt&&this.cn.getMV(t-1,n-1)[1]==0)&&this.cn.setAV(t,n,mt),this.cn.getAV(t,n-1)==It&&this.cn.setAV(t,n-1,mt))}handleKPUpper(t,n){this.cn.setMV(t,n+1,[0,0]),this.cn.getAV(t,n)==mt?this.cn.setAV(t,n+1,It):this.cn.setAV(t,n+1,zt),this.cn.getAV(t,n)==zt}handleTuckMissUpper(t,n,i){i==wn?(this.cn.setAV(t,n+1,zt),this.cn.setMV(t,n+1,[0,0])):i==xn&&(this.cn.setAV(t,n+1,Ie),this.cn.setMV(t,n+1,[0,-1]))}handleTuckMissLower(t,n,i){const r=this.cn.getAV(t,n);if(r==It||r==zt)this.cn.setDeltaJ(t,n,1);else if(r==Ie){let s=!1,o=0;for(;!s;){const a=this.cn.getMV(t,n-o)[1];a>0&&(this.cn.setDeltaJ(t,n-o,a+1),s=!0)}}}handleOp(t,n,i,r){(i==Cr||i==Mr)&&(this.handleKPLower(t,n,i),this.handleKPLower(t+r,n,i),this.handleKPUpper(t,n,i),this.handleKPUpper(t+r,n,i)),(i==wn||i==xn)&&(this.handleTuckMissLower(t,n,i),this.handleTuckMissLower(t+r,n,i),this.handleTuckMissUpper(t,n,i),this.handleTuckMissUpper(t+r,n,i))}processRow(t,n){if(n)for(let i=0;i<this.width;i++){const r=this.instructions.op(i,t);this.handleOp(2*i,t,r,1)}else for(let i=this.width-1;i>=0;i--){const r=this.instructions.op(i,t);this.handleOp(2*i+1,t,r,-1)}}populateContacts(){let t=!0;for(let n=0;n<this.height;n++)this.processRow(n,t),t=!t}}const zr={T:0,K:1,S:2},Pr=["K","T","S"];class ni{constructor(t){this.width=t.width,this.height=t.height,this.ops=Array.from(t.vMirror()).map(n=>Pr[n]).toReversed()}op(t,n){return t>this.width-1||t<0||n>this.height-1||n<0?-1:this.ops.at(t+n*this.width)}makeOpData(){const t=this.width,n=this.height,i=[];for(let r=0;r<n;r++)for(let s=0;s<t;s++){const o=r*t+s,a=this.op(s,r),l=[[2*s,r],[2*s+1,r],[2*s+1,r+1],[2*s,r+1]];i.push({index:o,stitch:a,op:zr[a],cnIndices:l.map(([c,h])=>h*2*t+c)})}return i}}const ii="K",ri="P",Ir="ECN",bn="ACN",Lr="UACN";function Dr(e){let t=0,n=0,i=!0,r=0;const s=[];for(;n<e.height;){const o=r%2==0,a=t%2==0,l=o===a?"F":"L";if(Rr(t,n,i,s,e)){let c;if(i)c=[t,n,r,l+"L"];else{const h=si(t,n,e);c=[h.i,h.j,r,l+"H"]}s.push(c)}({i:t,j:n,legNode:i,currentStitchRow:r}=oi(t,n,i,r,e))}return s}function Rr(e,t,n,i,r){if(n)return r.getST(e,t)==ii||r.getST(e,t)==ri;{let s=r.getAV(e,t);if(s==Ir)return!1;if(s==Lr){let o,a,l,c;if(e%2==0&&t%2!=0)[o,a,l,c]=i.at(-1);else{let f=!1,d=e,u=t,_=n,p=t-1;for(;!f;){const g=oi(d,u,_,p,r);r.getAV(g.i,g.j)==bn&&(f=!0),d=g.i,u=g.j,_=g.legNode,p=g.currentStitchRow}o=d,a=u}const h=si(e,t,r);return a<h.j?(r.setAV(e,t,bn),!0):!1}else return!0}}function si(e,t,n){const[i,r]=n.getMV(e,t);return t==n.height-1?{i:e,j:t}:i!=0?Le(e+i,t,n):Le(e,t+r,n)}function Le(e,t,n){return n.getST(e,t)==ii||n.getST(e,t)==ri?{i:e,j:t}:t==n.height-1?{i:e,j:t}:Le(e,t+n.getDeltaJ(e,t),n)}function oi(e,t,n,i,r){const s=i%2==0,o=e%2==0;let a=e,l=t,c=n;return n?s?o?(l=t+1,c=!1):a=e+1:o?a=e-1:(l=t+1,c=!1):s?o?a=e+1:(l=t-1,c=!0):o?(l=t-1,c=!0):a=e-1,a<0||a>=r.width?{i:e,j:t+1,legNode:!0,currentStitchRow:i+1}:{i:a,j:l,legNode:c,currentStitchRow:i}}class ai{constructor(t){this.width=t.width,this.height=t.height,this.cns=t,this.contactNodes=t.contacts.map((n,i)=>({index:i,st:n[0],cn:n[1],mv:n[2]})),this.yarnPath=Dr(t)}yarnPathToLinks(){let t=0,n=this.yarnPath[0][3];const i=[];return this.yarnPath.forEach(([r,s,o,a],l)=>{if(l==0)return;let c=s*this.width+r;i.push({source:t,target:c,row:o,linkType:n+a,index:l-1}),t=c,n=a}),i}makeNice(){return this.yarnPath.map(([t,n,i,r])=>({cnIndex:n*this.width+t,i:t,j:n,row:i,cnType:r,angle:null,normal:[0,0]}))}}class $n extends Map{constructor(t,n=Vr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(An(this,t))}has(t){return super.has(An(this,t))}set(t,n){return super.set(Hr(this,t),n)}delete(t){return super.delete(Or(this,t))}}function An({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Hr({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Or({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Vr(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Yr={value:()=>{}};function Ge(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ae(n)}function ae(e){this._=e}function Fr(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ae.prototype=Ge.prototype={constructor:ae,on:function(e,t){var n=this._,i=Fr(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=Xr(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=Sn(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Sn(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ae(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Xr(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Sn(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Yr,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var De="http://www.w3.org/1999/xhtml";const Nn={svg:"http://www.w3.org/2000/svg",xhtml:De,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function we(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nn.hasOwnProperty(t)?{space:Nn[t],local:e}:e}function Br(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===De&&t.documentElement.namespaceURI===De?t.createElement(e):t.createElementNS(n,e)}}function Ur(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function li(e){var t=we(e);return(t.local?Ur:Br)(t)}function qr(){}function Ke(e){return e==null?qr:function(){return this.querySelector(e)}}function Wr(e){typeof e!="function"&&(e=Ke(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=e.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new X(i,this._parents)}function Gr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kr(){return[]}function ci(e){return e==null?Kr:function(){return this.querySelectorAll(e)}}function Zr(e){return function(){return Gr(e.apply(this,arguments))}}function Jr(e){typeof e=="function"?e=Zr(e):e=ci(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(e.call(l,l.__data__,c,o)),r.push(l));return new X(i,r)}function hi(e){return function(){return this.matches(e)}}function ui(e){return function(t){return t.matches(e)}}var Qr=Array.prototype.find;function jr(e){return function(){return Qr.call(this.children,e)}}function ts(){return this.firstElementChild}function es(e){return this.select(e==null?ts:jr(typeof e=="function"?e:ui(e)))}var ns=Array.prototype.filter;function is(){return Array.from(this.children)}function rs(e){return function(){return ns.call(this.children,e)}}function ss(e){return this.selectAll(e==null?is:rs(typeof e=="function"?e:ui(e)))}function os(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new X(i,this._parents)}function fi(e){return new Array(e.length)}function as(){return new X(this._enter||this._groups.map(fi),this._parents)}function ue(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ue.prototype={constructor:ue,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ls(e){return function(){return e}}function cs(e,t,n,i,r,s){for(var o=0,a,l=t.length,c=s.length;o<c;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new ue(e,s[o]);for(;o<l;++o)(a=t[o])&&(r[o]=a)}function hs(e,t,n,i,r,s,o){var a,l,c=new Map,h=t.length,f=s.length,d=new Array(h),u;for(a=0;a<h;++a)(l=t[a])&&(d[a]=u=o.call(l,l.__data__,a,t)+"",c.has(u)?r[a]=l:c.set(u,l));for(a=0;a<f;++a)u=o.call(e,s[a],a,s)+"",(l=c.get(u))?(i[a]=l,l.__data__=s[a],c.delete(u)):n[a]=new ue(e,s[a]);for(a=0;a<h;++a)(l=t[a])&&c.get(d[a])===l&&(r[a]=l)}function us(e){return e.__data__}function fs(e,t){if(!arguments.length)return Array.from(this,us);var n=t?hs:cs,i=this._parents,r=this._groups;typeof e!="function"&&(e=ls(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],f=r[c],d=f.length,u=ds(e.call(h,h&&h.__data__,c,i)),_=u.length,p=a[c]=new Array(_),g=o[c]=new Array(_),y=l[c]=new Array(d);n(h,f,p,g,y,u,t);for(var x=0,S=0,w,k;x<_;++x)if(w=p[x]){for(x>=S&&(S=x+1);!(k=g[S])&&++S<_;);w._next=k||null}}return o=new X(o,i),o._enter=a,o._exit=l,o}function ds(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ps(){return new X(this._exit||this._groups.map(fi),this._parents)}function gs(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function _s(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c=n[l],h=i[l],f=c.length,d=a[l]=new Array(f),u,_=0;_<f;++_)(u=c[_]||h[_])&&(d[_]=u);for(;l<r;++l)a[l]=n[l];return new X(a,this._parents)}function vs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function ys(e){e||(e=ms);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(t)}return new X(r,this._parents).order()}function ms(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ws(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function xs(){return Array.from(this)}function bs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function $s(){let e=0;for(const t of this)++e;return e}function As(){return!this.node()}function Ss(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function Ns(e){return function(){this.removeAttribute(e)}}function ks(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ts(e,t){return function(){this.setAttribute(e,t)}}function Cs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ms(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Es(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function zs(e,t){var n=we(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ks:Ns:typeof t=="function"?n.local?Es:Ms:n.local?Cs:Ts)(n,t))}function di(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ps(e){return function(){this.style.removeProperty(e)}}function Is(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ls(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Ds(e,t,n){return arguments.length>1?this.each((t==null?Ps:typeof t=="function"?Ls:Is)(e,t,n??"")):Tt(this.node(),e)}function Tt(e,t){return e.style.getPropertyValue(t)||di(e).getComputedStyle(e,null).getPropertyValue(t)}function Rs(e){return function(){delete this[e]}}function Hs(e,t){return function(){this[e]=t}}function Os(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Vs(e,t){return arguments.length>1?this.each((t==null?Rs:typeof t=="function"?Os:Hs)(e,t)):this.node()[e]}function pi(e){return e.trim().split(/^|\s+/)}function Ze(e){return e.classList||new gi(e)}function gi(e){this._node=e,this._names=pi(e.getAttribute("class")||"")}gi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _i(e,t){for(var n=Ze(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function vi(e,t){for(var n=Ze(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Ys(e){return function(){_i(this,e)}}function Fs(e){return function(){vi(this,e)}}function Xs(e,t){return function(){(t.apply(this,arguments)?_i:vi)(this,e)}}function Bs(e,t){var n=pi(e+"");if(arguments.length<2){for(var i=Ze(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Xs:t?Ys:Fs)(n,t))}function Us(){this.textContent=""}function qs(e){return function(){this.textContent=e}}function Ws(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gs(e){return arguments.length?this.each(e==null?Us:(typeof e=="function"?Ws:qs)(e)):this.node().textContent}function Ks(){this.innerHTML=""}function Zs(e){return function(){this.innerHTML=e}}function Js(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qs(e){return arguments.length?this.each(e==null?Ks:(typeof e=="function"?Js:Zs)(e)):this.node().innerHTML}function js(){this.nextSibling&&this.parentNode.appendChild(this)}function to(){return this.each(js)}function eo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function no(){return this.each(eo)}function io(e){var t=typeof e=="function"?e:li(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ro(){return null}function so(e,t){var n=typeof e=="function"?e:li(e),i=t==null?ro:typeof t=="function"?t:Ke(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function oo(){var e=this.parentNode;e&&e.removeChild(this)}function ao(){return this.each(oo)}function lo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function co(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ho(e){return this.select(e?co:lo)}function uo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fo(e){return function(t){e.call(this,t,this.__data__)}}function po(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function go(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function _o(e,t,n){return function(){var i=this.__on,r,s=fo(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function vo(e,t,n){var i=po(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(r=0,h=a[l];r<s;++r)if((o=i[r]).type===h.type&&o.name===h.name)return h.value}return}for(a=t?_o:go,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function yi(e,t,n){var i=di(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function yo(e,t){return function(){return yi(this,e,t)}}function mo(e,t){return function(){return yi(this,e,t.apply(this,arguments))}}function wo(e,t){return this.each((typeof t=="function"?mo:yo)(e,t))}function*xo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var mi=[null];function X(e,t){this._groups=e,this._parents=t}function Zt(){return new X([[document.documentElement]],mi)}function bo(){return this}X.prototype=Zt.prototype={constructor:X,select:Wr,selectAll:Jr,selectChild:es,selectChildren:ss,filter:os,data:fs,enter:as,exit:ps,join:gs,merge:_s,selection:bo,order:vs,sort:ys,call:ws,nodes:xs,node:bs,size:$s,empty:As,each:Ss,attr:zs,style:Ds,property:Vs,classed:Bs,text:Gs,html:Qs,raise:to,lower:no,append:io,insert:so,remove:ao,clone:ho,datum:uo,on:vo,dispatch:wo,[Symbol.iterator]:xo};function Re(e){return typeof e=="string"?new X([[document.querySelector(e)]],[document.documentElement]):new X([[e]],mi)}function Je(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wi(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Jt(){}var Bt=.7,fe=1/Bt,At="\\s*([+-]?\\d+)\\s*",Ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",j="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$o=/^#([0-9a-f]{3,8})$/,Ao=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),So=new RegExp(`^rgb\\(${j},${j},${j}\\)$`),No=new RegExp(`^rgba\\(${At},${At},${At},${Ut}\\)$`),ko=new RegExp(`^rgba\\(${j},${j},${j},${Ut}\\)$`),To=new RegExp(`^hsl\\(${Ut},${j},${j}\\)$`),Co=new RegExp(`^hsla\\(${Ut},${j},${j},${Ut}\\)$`),kn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Je(Jt,qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tn,formatHex:Tn,formatHex8:Mo,formatHsl:Eo,formatRgb:Cn,toString:Cn});function Tn(){return this.rgb().formatHex()}function Mo(){return this.rgb().formatHex8()}function Eo(){return xi(this).formatHsl()}function Cn(){return this.rgb().formatRgb()}function qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$o.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mn(t):n===3?new Y(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?re(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?re(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ao.exec(e))?new Y(t[1],t[2],t[3],1):(t=So.exec(e))?new Y(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=No.exec(e))?re(t[1],t[2],t[3],t[4]):(t=ko.exec(e))?re(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=To.exec(e))?Pn(t[1],t[2]/100,t[3]/100,1):(t=Co.exec(e))?Pn(t[1],t[2]/100,t[3]/100,t[4]):kn.hasOwnProperty(e)?Mn(kn[e]):e==="transparent"?new Y(NaN,NaN,NaN,0):null}function Mn(e){return new Y(e>>16&255,e>>8&255,e&255,1)}function re(e,t,n,i){return i<=0&&(e=t=n=NaN),new Y(e,t,n,i)}function zo(e){return e instanceof Jt||(e=qt(e)),e?(e=e.rgb(),new Y(e.r,e.g,e.b,e.opacity)):new Y}function He(e,t,n,i){return arguments.length===1?zo(e):new Y(e,t,n,i??1)}function Y(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Je(Y,He,wi(Jt,{brighter(e){return e=e==null?fe:Math.pow(fe,e),new Y(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bt:Math.pow(Bt,e),new Y(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Y(gt(this.r),gt(this.g),gt(this.b),de(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:En,formatHex:En,formatHex8:Po,formatRgb:zn,toString:zn}));function En(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function Po(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function zn(){const e=de(this.opacity);return`${e===1?"rgb(":"rgba("}${gt(this.r)}, ${gt(this.g)}, ${gt(this.b)}${e===1?")":`, ${e})`}`}function de(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pt(e){return e=gt(e),(e<16?"0":"")+e.toString(16)}function Pn(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new J(e,t,n,i)}function xi(e){if(e instanceof J)return new J(e.h,e.s,e.l,e.opacity);if(e instanceof Jt||(e=qt(e)),!e)return new J;if(e instanceof J)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new J(o,a,l,e.opacity)}function Io(e,t,n,i){return arguments.length===1?xi(e):new J(e,t,n,i??1)}function J(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Je(J,Io,wi(Jt,{brighter(e){return e=e==null?fe:Math.pow(fe,e),new J(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bt:Math.pow(Bt,e),new J(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Y(ke(e>=240?e-240:e+120,r,i),ke(e,r,i),ke(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new J(In(this.h),se(this.s),se(this.l),de(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=de(this.opacity);return`${e===1?"hsl(":"hsla("}${In(this.h)}, ${se(this.s)*100}%, ${se(this.l)*100}%${e===1?")":`, ${e})`}`}}));function In(e){return e=(e||0)%360,e<0?e+360:e}function se(e){return Math.max(0,Math.min(1,e||0))}function ke(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bi=e=>()=>e;function Lo(e,t){return function(n){return e+n*t}}function Do(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Ro(e){return(e=+e)==1?$i:function(t,n){return n-t?Do(t,n,e):bi(isNaN(t)?n:t)}}function $i(e,t){var n=t-e;return n?Lo(e,n):bi(isNaN(e)?t:e)}const Ln=function e(t){var n=Ro(t);function i(r,s){var o=n((r=He(r)).r,(s=He(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=$i(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=a(h),r.b=l(h),r.opacity=c(h),r+""}}return i.gamma=e,i}(1);function at(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Te=new RegExp(Oe.source,"g");function Ho(e){return function(){return e}}function Oo(e){return function(t){return e(t)+""}}function Vo(e,t){var n=Oe.lastIndex=Te.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Oe.exec(e))&&(r=Te.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:at(i,r)})),n=Te.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Oo(l[0].x):Ho(t):(t=l.length,function(c){for(var h=0,f;h<t;++h)a[(f=l[h]).i]=f.x(c);return a.join("")})}var Dn=180/Math.PI,Ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ai(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Dn,skewX:Math.atan(l)*Dn,scaleX:o,scaleY:a}}var oe;function Yo(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ve:Ai(t.a,t.b,t.c,t.d,t.e,t.f)}function Fo(e){return e==null||(oe||(oe=document.createElementNS("http://www.w3.org/2000/svg","g")),oe.setAttribute("transform",e),!(e=oe.transform.baseVal.consolidate()))?Ve:(e=e.matrix,Ai(e.a,e.b,e.c,e.d,e.e,e.f))}function Si(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,h,f,d,u,_){if(c!==f||h!==d){var p=u.push("translate(",null,t,null,n);_.push({i:p-4,x:at(c,f)},{i:p-2,x:at(h,d)})}else(f||d)&&u.push("translate("+f+t+d+n)}function o(c,h,f,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:at(c,h)})):h&&f.push(r(f)+"rotate("+h+i)}function a(c,h,f,d){c!==h?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:at(c,h)}):h&&f.push(r(f)+"skewX("+h+i)}function l(c,h,f,d,u,_){if(c!==f||h!==d){var p=u.push(r(u)+"scale(",null,",",null,")");_.push({i:p-4,x:at(c,f)},{i:p-2,x:at(h,d)})}else(f!==1||d!==1)&&u.push(r(u)+"scale("+f+","+d+")")}return function(c,h){var f=[],d=[];return c=e(c),h=e(h),s(c.translateX,c.translateY,h.translateX,h.translateY,f,d),o(c.rotate,h.rotate,f,d),a(c.skewX,h.skewX,f,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,f,d),c=h=null,function(u){for(var _=-1,p=d.length,g;++_<p;)f[(g=d[_]).i]=g.x(u);return f.join("")}}}var Xo=Si(Yo,"px, ","px)","deg)"),Bo=Si(Fo,", ",")",")"),Ct=0,Lt=0,Pt=0,Ni=1e3,pe,Dt,ge=0,vt=0,xe=0,Wt=typeof performance=="object"&&performance.now?performance:Date,ki=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qe(){return vt||(ki(Uo),vt=Wt.now()+xe)}function Uo(){vt=0}function _e(){this._call=this._time=this._next=null}_e.prototype=je.prototype={constructor:_e,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qe():+n)+(t==null?0:+t),!this._next&&Dt!==this&&(Dt?Dt._next=this:pe=this,Dt=this),this._call=e,this._time=n,Ye()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ye())}};function je(e,t,n){var i=new _e;return i.restart(e,t,n),i}function qo(){Qe(),++Ct;for(var e=pe,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ct}function Rn(){vt=(ge=Wt.now())+xe,Ct=Lt=0;try{qo()}finally{Ct=0,Go(),vt=0}}function Wo(){var e=Wt.now(),t=e-ge;t>Ni&&(xe-=t,ge=e)}function Go(){for(var e,t=pe,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pe=n);Dt=e,Ye(i)}function Ye(e){if(!Ct){Lt&&(Lt=clearTimeout(Lt));var t=e-vt;t>24?(e<1/0&&(Lt=setTimeout(Rn,e-Wt.now()-xe)),Pt&&(Pt=clearInterval(Pt))):(Pt||(ge=Wt.now(),Pt=setInterval(Wo,Ni)),Ct=1,ki(Rn))}}function Hn(e,t,n){var i=new _e;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Ko=Ge("start","end","cancel","interrupt"),Zo=[],Ti=0,On=1,Fe=2,le=3,Vn=4,Xe=5,ce=6;function be(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Jo(e,n,{name:t,index:i,group:r,on:Ko,tween:Zo,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ti})}function tn(e,t){var n=Q(e,t);if(n.state>Ti)throw new Error("too late; already scheduled");return n}function et(e,t){var n=Q(e,t);if(n.state>le)throw new Error("too late; already running");return n}function Q(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jo(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=je(s,0,n.time);function s(c){n.state=On,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var h,f,d,u;if(n.state!==On)return l();for(h in i)if(u=i[h],u.name===n.name){if(u.state===le)return Hn(o);u.state===Vn?(u.state=ce,u.timer.stop(),u.on.call("interrupt",e,e.__data__,u.index,u.group),delete i[h]):+h<t&&(u.state=ce,u.timer.stop(),u.on.call("cancel",e,e.__data__,u.index,u.group),delete i[h])}if(Hn(function(){n.state===le&&(n.state=Vn,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Fe,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fe){for(n.state=le,r=new Array(d=n.tween.length),h=0,f=-1;h<d;++h)(u=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=u);r.length=f+1}}function a(c){for(var h=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Xe,1),f=-1,d=r.length;++f<d;)r[f].call(e,h);n.state===Xe&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ce,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function Qo(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>Fe&&i.state<Xe,i.state=ce,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function jo(e){return this.each(function(){Qo(this,e)})}function ta(e,t){var n,i;return function(){var r=et(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function ea(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=et(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function na(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Q(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?ta:ea)(n,e,t))}function en(e,t,n){var i=e._id;return e.each(function(){var r=et(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Q(r,i).value[t]}}function Ci(e,t){var n;return(typeof t=="number"?at:t instanceof qt?Ln:(n=qt(t))?(t=n,Ln):Vo)(e,t)}function ia(e){return function(){this.removeAttribute(e)}}function ra(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sa(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function oa(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function aa(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function la(e,t,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a)))}}function ca(e,t){var n=we(e),i=n==="transform"?Bo:Ci;return this.attrTween(e,typeof t=="function"?(n.local?la:aa)(n,i,en(this,"attr."+e,t)):t==null?(n.local?ra:ia)(n):(n.local?oa:sa)(n,i,t))}function ha(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ua(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fa(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&ua(e,s)),n}return r._value=t,r}function da(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&ha(e,s)),n}return r._value=t,r}function pa(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=we(e);return this.tween(n,(i.local?fa:da)(i,t))}function ga(e,t){return function(){tn(this,e).delay=+t.apply(this,arguments)}}function _a(e,t){return t=+t,function(){tn(this,e).delay=t}}function va(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ga:_a)(t,e)):Q(this.node(),t).delay}function ya(e,t){return function(){et(this,e).duration=+t.apply(this,arguments)}}function ma(e,t){return t=+t,function(){et(this,e).duration=t}}function wa(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ya:ma)(t,e)):Q(this.node(),t).duration}function xa(e,t){if(typeof t!="function")throw new Error;return function(){et(this,e).ease=t}}function ba(e){var t=this._id;return arguments.length?this.each(xa(t,e)):Q(this.node(),t).ease}function $a(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;et(this,e).ease=n}}function Aa(e){if(typeof e!="function")throw new Error;return this.each($a(this._id,e))}function Sa(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new rt(i,this._parents,this._name,this._id)}function Na(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=t[a],c=n[a],h=l.length,f=o[a]=new Array(h),d,u=0;u<h;++u)(d=l[u]||c[u])&&(f[u]=d);for(;a<i;++a)o[a]=t[a];return new rt(o,this._parents,this._name,this._id)}function ka(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ta(e,t,n){var i,r,s=ka(t)?tn:et;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function Ca(e,t){var n=this._id;return arguments.length<2?Q(this.node(),n).on.on(e):this.each(Ta(n,e,t))}function Ma(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ea(){return this.on("end.remove",Ma(this._id))}function za(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ke(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),h,f,d=0;d<l;++d)(h=a[d])&&(f=e.call(h,h.__data__,d,a))&&("__data__"in h&&(f.__data__=h.__data__),c[d]=f,be(c[d],t,n,d,c,Q(h,n)));return new rt(s,this._parents,t,n)}function Pa(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ci(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,h,f=0;f<c;++f)if(h=l[f]){for(var d=e.call(h,h.__data__,f,l),u,_=Q(h,n),p=0,g=d.length;p<g;++p)(u=d[p])&&be(u,t,n,p,d,_);s.push(d),o.push(h)}return new rt(s,o,t,n)}var Ia=Zt.prototype.constructor;function La(){return new Ia(this._groups,this._parents)}function Da(e,t){var n,i,r;return function(){var s=Tt(this,e),o=(this.style.removeProperty(e),Tt(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function Mi(e){return function(){this.style.removeProperty(e)}}function Ra(e,t,n){var i,r=n+"",s;return function(){var o=Tt(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function Ha(e,t,n){var i,r,s;return function(){var o=Tt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Tt(this,e))),o===l?null:o===i&&l===r?s:(r=l,s=t(i=o,a))}}function Oa(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var l=et(this,e),c=l.on,h=l.value[s]==null?a||(a=Mi(t)):void 0;(c!==n||r!==h)&&(i=(n=c).copy()).on(o,r=h),l.on=i}}function Va(e,t,n){var i=(e+="")=="transform"?Xo:Ci;return t==null?this.styleTween(e,Da(e,i)).on("end.style."+e,Mi(e)):typeof t=="function"?this.styleTween(e,Ha(e,i,en(this,"style."+e,t))).each(Oa(this._id,e)):this.styleTween(e,Ra(e,i,t),n).on("end.style."+e,null)}function Ya(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Fa(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Ya(e,o,n)),i}return s._value=t,s}function Xa(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Fa(e,t,n??""))}function Ba(e){return function(){this.textContent=e}}function Ua(e){return function(){var t=e(this);this.textContent=t??""}}function qa(e){return this.tween("text",typeof e=="function"?Ua(en(this,"text",e)):Ba(e==null?"":e+""))}function Wa(e){return function(t){this.textContent=e.call(this,t)}}function Ga(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Wa(r)),t}return i._value=e,i}function Ka(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ga(e))}function Za(){for(var e=this._name,t=this._id,n=Ei(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=Q(l,t);be(l,e,n,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new rt(i,this._parents,e,n)}function Ja(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=et(this,i),h=c.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),r===0&&s()})}var Qa=0;function rt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Ei(){return++Qa}var it=Zt.prototype;rt.prototype={constructor:rt,select:za,selectAll:Pa,selectChild:it.selectChild,selectChildren:it.selectChildren,filter:Sa,merge:Na,selection:La,transition:Za,call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:Ca,attr:ca,attrTween:pa,style:Va,styleTween:Xa,text:qa,textTween:Ka,remove:Ea,tween:na,delay:va,duration:wa,ease:ba,easeVarying:Aa,end:Ja,[Symbol.iterator]:it[Symbol.iterator]};function ja(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tl={time:null,delay:0,duration:250,ease:ja};function el(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nl(e){var t,n;e instanceof rt?(t=e._id,e=e._name):(t=Ei(),(n=tl).time=Qe(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&be(l,e,t,c,o,n||el(l,t));return new rt(i,this._parents,e,t)}Zt.prototype.interrupt=jo;Zt.prototype.transition=nl;const Be=Math.PI,Ue=2*Be,ft=1e-6,il=Ue-ft;function zi(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function rl(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zi;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class sl{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zi:rl(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,c=r-n,h=o-t,f=a-n,d=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>ft)if(!(Math.abs(f*l-c*h)>ft)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let u=i-o,_=r-a,p=l*l+c*c,g=u*u+_*_,y=Math.sqrt(p),x=Math.sqrt(d),S=s*Math.tan((Be-Math.acos((p+d-g)/(2*y*x)))/2),w=S/x,k=S/y;Math.abs(w-1)>ft&&this._append`L${t+w*h},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*u>h*_)},${this._x1=t+k*l},${this._y1=n+k*c}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=t+a,h=n+l,f=1^o,d=o?r-s:s-r;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>ft||Math.abs(this._y1-h)>ft)&&this._append`L${c},${h}`,i&&(d<0&&(d=d%Ue+Ue),d>il?this._append`A${i},${i},0,1,${f},${t-a},${n-l}A${i},${i},0,1,${f},${this._x1=c},${this._y1=h}`:d>ft&&this._append`A${i},${i},0,${+(d>=Be)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function ol(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Pi(this.cover(t,n),t,n,e)}function Pi(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,s=e._root,o={data:i},a=e._x0,l=e._y0,c=e._x1,h=e._y1,f,d,u,_,p,g,y,x;if(!s)return e._root=o,e;for(;s.length;)if((p=t>=(f=(a+c)/2))?a=f:c=f,(g=n>=(d=(l+h)/2))?l=d:h=d,r=s,!(s=s[y=g<<1|p]))return r[y]=o,e;if(u=+e._x.call(null,s.data),_=+e._y.call(null,s.data),t===u&&n===_)return o.next=s,r?r[y]=o:e._root=o,e;do r=r?r[y]=new Array(4):e._root=new Array(4),(p=t>=(f=(a+c)/2))?a=f:c=f,(g=n>=(d=(l+h)/2))?l=d:h=d;while((y=g<<1|p)===(x=(_>=d)<<1|u>=f));return r[x]=s,r[y]=o,e}function al(e){var t,n,i=e.length,r,s,o=new Array(i),a=new Array(i),l=1/0,c=1/0,h=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=r,a[n]=s,r<l&&(l=r),r>h&&(h=r),s<c&&(c=s),s>f&&(f=s));if(l>h||c>f)return this;for(this.cover(l,c).cover(h,f),n=0;n<i;++n)Pi(this,o[n],a[n],e[n]);return this}function ll(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,s=(i=Math.floor(t))+1;else{for(var o=r-n||1,a=this._root,l,c;n>e||e>=r||i>t||t>=s;)switch(c=(t<i)<<1|e<n,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:r=n+o,s=i+o;break;case 1:n=r-o,s=i+o;break;case 2:r=n+o,i=s-o;break;case 3:n=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function cl(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function hl(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function O(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function ul(e,t,n){var i,r=this._x0,s=this._y0,o,a,l,c,h=this._x1,f=this._y1,d=[],u=this._root,_,p;for(u&&d.push(new O(u,r,s,h,f)),n==null?n=1/0:(r=e-n,s=t-n,h=e+n,f=t+n,n*=n);_=d.pop();)if(!(!(u=_.node)||(o=_.x0)>h||(a=_.y0)>f||(l=_.x1)<r||(c=_.y1)<s))if(u.length){var g=(o+l)/2,y=(a+c)/2;d.push(new O(u[3],g,y,l,c),new O(u[2],o,y,g,c),new O(u[1],g,a,l,y),new O(u[0],o,a,g,y)),(p=(t>=y)<<1|e>=g)&&(_=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=_)}else{var x=e-+this._x.call(null,u.data),S=t-+this._y.call(null,u.data),w=x*x+S*S;if(w<n){var k=Math.sqrt(n=w);r=e-k,s=t-k,h=e+k,f=t+k,i=u.data}}return i}function fl(e){if(isNaN(h=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,i,r,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,h,f,d,u,_,p,g,y;if(!n)return this;if(n.length)for(;;){if((_=h>=(d=(o+l)/2))?o=d:l=d,(p=f>=(u=(a+c)/2))?a=u:c=u,t=n,!(n=n[g=p<<1|_]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(i=t,y=g)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[y]=n:this._root=n),this):(this._root=s,this)}function dl(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function pl(){return this._root}function gl(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function _l(e){var t=[],n,i=this._root,r,s,o,a,l;for(i&&t.push(new O(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&i.length){var c=(s+a)/2,h=(o+l)/2;(r=i[3])&&t.push(new O(r,c,h,a,l)),(r=i[2])&&t.push(new O(r,s,h,c,l)),(r=i[1])&&t.push(new O(r,c,o,a,h)),(r=i[0])&&t.push(new O(r,s,o,c,h))}return this}function vl(e){var t=[],n=[],i;for(this._root&&t.push(new O(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,c=i.y1,h=(o+l)/2,f=(a+c)/2;(s=r[0])&&t.push(new O(s,o,a,h,f)),(s=r[1])&&t.push(new O(s,h,a,l,f)),(s=r[2])&&t.push(new O(s,o,f,h,c)),(s=r[3])&&t.push(new O(s,h,f,l,c))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function yl(e){return e[0]}function ml(e){return arguments.length?(this._x=e,this):this._x}function wl(e){return e[1]}function xl(e){return arguments.length?(this._y=e,this):this._y}function Ii(e,t,n){var i=new nn(t??yl,n??wl,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function nn(e,t,n,i,r,s){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function Yn(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var V=Ii.prototype=nn.prototype;V.copy=function(){var e=new nn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Yn(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=Yn(i));return e};V.add=ol;V.addAll=al;V.cover=ll;V.data=cl;V.extent=hl;V.find=ul;V.remove=fl;V.removeAll=dl;V.root=pl;V.size=gl;V.visit=_l;V.visitAfter=vl;V.x=ml;V.y=xl;function Ht(e){return function(){return e}}function $t(e){return(e()-.5)*1e-6}function bl(e){return e.index}function Fn(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Li(e){var t=bl,n=f,i,r=Ht(30),s,o,a,l,c,h=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,x=e.length;y<h;++y)for(var S=0,w,k,E,z,A,T,b;S<x;++S)w=e[S],k=w.source,E=w.target,z=E.x+E.vx-k.x-k.vx||$t(c),A=E.y+E.vy-k.y-k.vy||$t(c),T=Math.sqrt(z*z+A*A),T=(T-s[S])/T*g*i[S],z*=T,A*=T,E.vx-=z*(b=l[S]),E.vy-=A*b,k.vx+=z*(b=1-b),k.vy+=A*b}function u(){if(o){var g,y=o.length,x=e.length,S=new Map(o.map((k,E)=>[t(k,E,o),k])),w;for(g=0,a=new Array(y);g<x;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Fn(S,w.source)),typeof w.target!="object"&&(w.target=Fn(S,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,l=new Array(x);g<x;++g)w=e[g],l[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);i=new Array(x),_(),s=new Array(x),p()}}function _(){if(o)for(var g=0,y=e.length;g<y;++g)i[g]=+n(e[g],g,e)}function p(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+r(e[g],g,e)}return d.initialize=function(g,y){o=g,c=y,u()},d.links=function(g){return arguments.length?(e=g,u(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(h=+g,d):h},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ht(+g),_(),d):n},d.distance=function(g){return arguments.length?(r=typeof g=="function"?g:Ht(+g),p(),d):r},d}const $l=1664525,Al=1013904223,Xn=4294967296;function Sl(){let e=1;return()=>(e=($l*e+Al)%Xn)/Xn}function Nl(e){return e.x}function kl(e){return e.y}var Tl=10,Cl=Math.PI*(3-Math.sqrt(5));function Di(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,l=je(f),c=Ge("tick","end"),h=Sl();e==null&&(e=[]);function f(){d(),c.call("tick",t),n<i&&(l.stop(),c.call("end",t))}function d(p){var g,y=e.length,x;p===void 0&&(p=1);for(var S=0;S<p;++S)for(n+=(s-n)*r,a.forEach(function(w){w(n)}),g=0;g<y;++g)x=e[g],x.fx==null?x.x+=x.vx*=o:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=o:(x.y=x.fy,x.vy=0);return t}function u(){for(var p=0,g=e.length,y;p<g;++p){if(y=e[p],y.index=p,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var x=Tl*Math.sqrt(.5+p),S=p*Cl;y.x=x*Math.cos(S),y.y=x*Math.sin(S)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function _(p){return p.initialize&&p.initialize(e,h),p}return u(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(p){return arguments.length?(e=p,u(),a.forEach(_),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(i=+p,t):i},alphaDecay:function(p){return arguments.length?(r=+p,t):+r},alphaTarget:function(p){return arguments.length?(s=+p,t):s},velocityDecay:function(p){return arguments.length?(o=1-p,t):1-o},randomSource:function(p){return arguments.length?(h=p,a.forEach(_),t):h},force:function(p,g){return arguments.length>1?(g==null?a.delete(p):a.set(p,_(g)),t):a.get(p)},find:function(p,g,y){var x=0,S=e.length,w,k,E,z,A;for(y==null?y=1/0:y*=y,x=0;x<S;++x)z=e[x],w=p-z.x,k=g-z.y,E=w*w+k*k,E<y&&(A=z,y=E);return A},on:function(p,g){return arguments.length>1?(c.on(p,g),t):c.on(p)}}}function Ml(){var e,t,n,i,r=Ht(-30),s,o=1,a=1/0,l=.81;function c(u){var _,p=e.length,g=Ii(e,Nl,kl).visitAfter(f);for(i=u,_=0;_<p;++_)t=e[_],g.visit(d)}function h(){if(e){var u,_=e.length,p;for(s=new Array(_),u=0;u<_;++u)p=e[u],s[p.index]=+r(p,u,e)}}function f(u){var _=0,p,g,y=0,x,S,w;if(u.length){for(x=S=w=0;w<4;++w)(p=u[w])&&(g=Math.abs(p.value))&&(_+=p.value,y+=g,x+=g*p.x,S+=g*p.y);u.x=x/y,u.y=S/y}else{p=u,p.x=p.data.x,p.y=p.data.y;do _+=s[p.data.index];while(p=p.next)}u.value=_}function d(u,_,p,g){if(!u.value)return!0;var y=u.x-t.x,x=u.y-t.y,S=g-_,w=y*y+x*x;if(S*S/l<w)return w<a&&(y===0&&(y=$t(n),w+=y*y),x===0&&(x=$t(n),w+=x*x),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*u.value*i/w,t.vy+=x*u.value*i/w),!0;if(u.length||w>=a)return;(u.data!==t||u.next)&&(y===0&&(y=$t(n),w+=y*y),x===0&&(x=$t(n),w+=x*x),w<o&&(w=Math.sqrt(o*w)));do u.data!==t&&(S=s[u.data.index]*i/w,t.vx+=y*S,t.vy+=x*S);while(u=u.next)}return c.initialize=function(u,_){e=u,n=_,h()},c.strength=function(u){return arguments.length?(r=typeof u=="function"?u:Ht(+u),h(),c):r},c.distanceMin=function(u){return arguments.length?(o=u*u,c):Math.sqrt(o)},c.distanceMax=function(u){return arguments.length?(a=u*u,c):Math.sqrt(a)},c.theta=function(u){return arguments.length?(l=u*u,c):Math.sqrt(l)},c}function El(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Bn=Symbol("implicit");function Ri(){var e=new $n,t=[],n=[],i=Bn;function r(s){let o=e.get(s);if(o===void 0){if(i!==Bn)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new $n;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return Ri(t,n).unknown(i)},El.apply(r,arguments),r}function zl(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Pl=zl("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2");function wt(e){return function(){return e}}const Un=1e-12;function Il(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new sl(t)}function Ll(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hi(e){this._context=e}Hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Dl(e){return new Hi(e)}function Rl(e){return e[0]}function Hl(e){return e[1]}function Oi(e,t){var n=wt(!0),i=null,r=Dl,s=null,o=Il(a);e=typeof e=="function"?e:e===void 0?Rl:wt(e),t=typeof t=="function"?t:t===void 0?Hl:wt(t);function a(l){var c,h=(l=Ll(l)).length,f,d=!1,u;for(i==null&&(s=r(u=o())),c=0;c<=h;++c)!(c<h&&n(f=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,c,l),+t(f,c,l));if(u)return s=null,u+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:wt(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:wt(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:wt(!!l),a):n},a.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),a):i},a}function qe(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function rn(e,t){this._context=e,this._k=(1-t)/6}rn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:qe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:qe(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(i){return new rn(i,t)}return n.tension=function(i){return e(+i)},n})(0);function sn(e,t){this._context=e,this._k=(1-t)/6}sn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qe(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(i){return new sn(i,t)}return n.tension=function(i){return e(+i)},n})(0);function Vi(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Un){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Un){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/h}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function Yi(e,t){this._context=e,this._alpha=t}Yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Vi(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(i){return t?new Yi(i,t):new rn(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function Fi(e,t){this._context=e,this._alpha=t}Fi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vi(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xi=function e(t){function n(i){return t?new Fi(i,t):new sn(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Rt(e,t,n){this.k=e,this.x=t,this.y=n}Rt.prototype={constructor:Rt,scale:function(e){return e===1?this:new Rt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Rt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Rt.prototype;function Ol(e,t,n,i){const r=new ni(t),s=new ei(r),o=new ai(s.cn),a=[n,i],l=Re(".simcontainer").append("svg").attr("width","100%").attr("height","100%");function c(A){var T=Re(".simcontainer").node().getBoundingClientRect();const b=T.width,C=T.height,H=e.vDist;return A.contactNodes.forEach((M,q)=>{const L=q%A.width,ot=(q-L)/A.width;M.i=L,M.j=ot,M.x=b/2-H*(A.width-1)/2+L*H,M.y=C/2+H*(A.height-1)/2-ot*H}),A.contactNodes}const h=c(o),f=o.makeNice(),d=o.yarnPathToLinks(),u=l.append("g").attr("class","yarns-behind"),_=l.append("g").attr("class","yarns"),p=u.attr("filter","brightness(0.7)").attr("stroke-width",e.yarnWidth).attr("stroke-linecap","round").selectAll().data(d).join("path").filter(function(A){return!(A.linkType=="FLFH"||A.linkType=="LHLL")}).attr("fill","none").attr("stroke",A=>a[A.row%4<2?0:1]),g=_.attr("stroke-width",e.yarnWidth).attr("stroke-linecap","round").selectAll().data(d).join("path").filter(function(A){return A.linkType=="FLFH"||A.linkType=="LHLL"}).attr("fill","none").attr("stroke",A=>a[A.row%4<2?0:1]);function y(A,T,b){if(A.index===T.index)return[0,0];const C=A.x-T.x,H=A.y-T.y,M=Math.sqrt(C**2+H**2);return b?[-H/M,C/M]:[H/M,-C/M]}function x(){f[0].normal=y(h[f[0].cnIndex],h[f[1].cnIndex],!0);for(let A=1;A<f.length-1;A++)f[A].normal=y(h[f[A-1].cnIndex],h[f[A+1].cnIndex],f[A].j%2!=0);f.at(-1).normal=y(h[f.at(-2).cnIndex],h[f.at(-1).cnIndex],!0)}const S=Oi().x(A=>h[A.cnIndex].x+e.yarnWidth/2*A.normal[0]).y(A=>h[A.cnIndex].y+e.yarnWidth/2*A.normal[1]).curve(Xi);function w(A){const T=A.index;if(T==0||T>d.length-3)return`M ${A.source.x} ${A.source.y} ${A.target.x} ${A.target.y}`;const b=[f[T-1],f[T],f[T+1],f[T+2]];return S(b)}function k(){x(),g.attr("d",w),p.attr("d",w)}const E=Di(h).force("charge",Ml().strength(-40).distanceMax(40)).force("link",Li(d).strength(2).distance(A=>A.linkType=="LLFL"||A.linkType=="FHLH"?e.hDist:e.vDist).iterations(2)).on("tick",k);function z(){E.stop(),g.on("mousedown.drag",null),p.on("mousedown.drag",null),l.remove()}return z}let Ce;class Vl{constructor(t,n,i,r){this.parentEl=t,this.dispatch=r,this.currentTarget=[null,null],this.renderView(i),this.sim=null,this.endSim=null,this.mainYarn="#F1C113",this.contrastYarn="#1885d8",this.v=30,this.h=40}view(t){return st`<div class="sim-controls">
        <input
          type="color"
          value=${this.contrastYarn}
          @input=${n=>{this.contrastYarn=n.target.value,this.sync(t)}} /><input
          type="color"
          value=${this.mainYarn}
          @input=${n=>{this.mainYarn=n.target.value,this.sync(t)}} />
        <input
          type="number"
          value=${this.v}
          @input=${n=>{this.v=Number(n.target.value),this.sync(t)}} />
        <input
          type="number"
          value=${this.h}
          @input=${n=>{this.h=Number(n.target.value),this.sync(t)}} />
      </div>
      <div class="simcontainer"></div>`}renderView(t){yt(this.view(t),this.parentEl)}runSim(t){const n=t.simulation.currentTarget;this.endSim&&this.endSim(),this.endSim=null,this.endSim=Ol(t.simulation.PARAMS,U.fromTile(this.v,this.h,t[n[0]][n[1]].bitmap),this.mainYarn,this.contrastYarn,this.repeatsVertical)}sync(t){Ce&&clearTimeout(Ce),Ce=setTimeout(()=>this.runSim(t),500)}}class Yl{constructor(t,n,i,r){this.parentEl=t,this.dispatch=r,this.renderView(i)}doDownload(t,n,i){let r=document.createElement("a");r.setAttribute("href",Pe[t](n,i)),r.setAttribute("download",`pattern.${t}`),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}view(t){const n=t.motifs.motif0;return st`<div id="export">
      <!-- <div class="control-header">Export</div> -->
      <div class="flex-buttons">
        <button
          @click=${()=>this.doDownload("txt",n.bitmap,n.palette)}>
          TXT
        </button>
        <!-- <button
          @click=${()=>this.doDownload("jpg",n.bitmap,n.palette)}>
          JPG
        </button>
        <button
          @click=${()=>this.doDownload("png",n.bitmap,n.palette)}>
          PNG
        </button> -->
        <button
          @click=${()=>this.doDownload("json",n.bitmap,n.palette)}>
          JSON
        </button>
      </div>
    </div>`}renderView(t){yt(this.view(t),this.parentEl)}sync(t){this.renderView(t)}}class Fl{constructor(t,n,i,r){this.parentEl=t,this.dispatch=r,this.renderView(i)}view(t){return st`<div>There's nothing here!</div>
      <button @click=${()=>this.dispatch("newMotif")}>new motif</button>`}renderView(t){yt(this.view(this.dispatch),this.parentEl)}sync(t){}}class Xl{constructor(t,n,i,r){this.parentEl=t,this.dispatch=r,this.renderView(i)}view(t){return st`<div>There's nothing here!</div>
      <button @click=${()=>this.dispatch("newMotif")}>new motif</button>`}renderView(t){yt(this.view(this.dispatch),this.parentEl)}sync(t){}}function Bl(e,t,n,i){const r=new ni(t);r.makeOpData();const s=new ei(r),o=new ai(s.cn);Ri(Pl);const a=[n,i],l=Re("#swatch-preview"),c=1,h=.6;function f(b){return b.contactNodes.forEach((M,q)=>{const L=q%b.width,ot=(q-L)/b.width;M.i=L,M.j=ot,M.x=30+L*12,M.y=(b.height-ot)*18}),b.contactNodes}l.append("g").attr("class","operations");const d=f(o),u=o.makeNice(),_=o.yarnPathToLinks(),p=l.append("g").attr("class","yarns-behind"),g=l.append("g").attr("class","yarns");l.append("g").attr("class","ui");const y=p.attr("filter","brightness(0.7)").attr("stroke-width",e.yarnWidth).attr("stroke-linecap","round").selectAll().data(_).join("path").filter(function(b){return!(b.linkType=="LHLL"||b.linkType=="FLFH")}).attr("data-link",b=>b.linkType).attr("fill","none").attr("stroke",b=>a[b.row%4<2?0:1]),x=g.attr("stroke-width",e.yarnWidth).attr("stroke-linecap","round").selectAll().data(_).join("path").filter(function(b){return b.linkType=="LHLL"||b.linkType=="FLFH"}).attr("data-link",b=>b.linkType).attr("fill","none").attr("stroke",b=>a[b.row%4<2?0:1]);function S(b,C,H){if(b.index===C.index)return[0,0];const M=b.x-C.x,q=b.y-C.y,L=c*Math.sqrt(M**2+q**2);return H?[-q/L,M/L]:[q/L,-M/L]}function w(){u[0].normal=S(d[u[0].cnIndex],d[u[1].cnIndex],!0);for(let b=1;b<u.length-1;b++){let C;u[b].cnType=="FH"||u[b].cnType=="LH"?u[b].row%2==0?C=!0:C=!1:u[b].row%2==0?C=!1:C=!0,u[b].normal=S(d[u[b-1].cnIndex],d[u[b+1].cnIndex],C)}u.at(-1).normal=S(d[u.at(-2).cnIndex],d[u.at(-1).cnIndex],!0)}const k=Oi().x(b=>d[b.cnIndex].x+e.yarnWidth/2*b.normal[0]).y(b=>d[b.cnIndex].y+e.yarnWidth/2*b.normal[1]).curve(Xi);function E(b){const C=b.index;if(C==0||C>_.length-3)return`M ${b.source.x} ${b.source.y} ${b.target.x} ${b.target.y}`;const H=[u[C-1],u[C],u[C+1],u[C+2]];return k(H)}function z(){w(),x.attr("d",E),y.attr("d",E)}z();function A(){l.selectAll("*").remove()}function T(){Di(d).force("link",Li(_).strength(h).iterations(2).distance(b=>b.linkType=="LLFL"||b.linkType=="FHLH"?e.hDist:e.vDist)).on("tick",z)}return{clear:A,relax:T}}let Me;class Ul{constructor(t,n,i,r){this.parentEl=t,this.dispatch=r,this.currentTarget=[null,null],this.renderView(i),this.sim=null,this.clear=null,this.relax=null,this.mainYarn="#F1C113",this.contrastYarn="#1885d8",this.v=45,this.h=70}view(t){return st`<div class="sim-controls">
        <input
          type="color"
          value=${this.mainYarn}
          @input=${n=>{this.mainYarn=n.target.value,this.sync(t)}} />
        <input
          type="color"
          value=${this.contrastYarn}
          @input=${n=>{this.contrastYarn=n.target.value,this.sync(t)}} />
        <input
          type="number"
          value=${this.v}
          @input=${n=>{this.v=Number(n.target.value),this.sync(t)}} />
        <input
          type="number"
          value=${this.h}
          @input=${n=>{this.h=Number(n.target.value),this.sync(t)}} />
        <button @click=${n=>this.relax()}>Relax</button>
      </div>
      <div class="simcontainer">
        <svg
          width="100%"
          height="auto"
          viewBox="0 0 1200 1200"
          id="swatch-preview"></svg>
      </div>`}renderView(t){yt(this.view(t),this.parentEl)}updatePreview(t){const n=t.simulation.currentTarget;this.clear&&this.clear(),this.clear=null;let{clear:i,relax:r}=Bl(t.simulation.PARAMS,U.fromTile(this.v,this.h,t[n[0]][n[1]].bitmap),this.mainYarn,this.contrastYarn,this.repeatsVertical);this.clear=i,this.relax=r}sync(t){Me&&clearTimeout(Me),Me=setTimeout(()=>this.updatePreview(t),70)}}function ql(e,t){const n=jn(e);let i=!1,r=1,s=0,o=0,a={x:0,y:0};function l(u){u.style.transformOrigin="0px 0px",u.style.transform=`translate(${s}px, ${o}px) scale(${r})`}function c(){const u=e.querySelectorAll(":scope > .transform-group");for(const _ of u)l(_)}function h({x:u,y:_}){let p=(u-s)/r,g=(_-o)/r;return{x:p,y:g}}n("pointerdown","",u=>{if(t.activeTool!=="pan")return;let _=u.currentTarget.getBoundingClientRect();const p=u.pageX-_.left,g=u.pageY-_.top;i=!0,a={x:p-s,y:g-o}}),n("pointermove","",u=>{if(!i)return;let _=u.currentTarget.getBoundingClientRect();const p=u.pageX-_.left,g=u.pageY-_.top;s=p-a.x,o=g-a.y,c()}),n("pointerup","",u=>{i=!1}),n("mouseleave","#canvas-container",u=>{i=!1}),n("wheel","",u=>{let _=(u.offsetX-s)/r,p=(u.offsetY-o)/r;Math.sign(u.deltaY)<0?r*=1.03:r/=1.03,s=u.offsetX-_*r,o=u.offsetY-p*r,c(),u.preventDefault()},{passive:!1});function f(u){r=u.scale,s=u.x,o=u.y,c()}function d(u){const _=e.getBoundingClientRect(),p=u.x[1]-u.x[0],g=u.y[1]-u.y[0],y=_.width/p,x=_.height/g,S=Math.min(y,x)*.95;r=S;const w={x:(u.x[0]+u.x[1])/2*S-_.width/2,y:(u.y[0]+u.y[1])/2*S-_.height/2};s=-w.x,o=-w.y,c()}return{scale:()=>r,x:()=>s,y:()=>o,setScaleXY:d,toWorkspaceCoords:h,setPanZoom:f}}function Wl(e,t,n,i,r){let s=e;function o(a,l){if(a.pX==s.pX&&a.pY==s.pY)return;const c=l.motifs[t].bitmap.line({x:s.pX,y:s.pY},{x:a.pX,y:a.pY},r);s=a,i("editMotif",{motifID:t,bitmap:c})}return o(e,n),o}function Gl(e,t,n,i,r){let s=e;function o(a,l){a.pX==s.pX&&a.pY==s.pY||(s=a,i("editMotif",{motifID:t,bitmap:l.motifs[t].bitmap.flood({x:s.pX,y:s.pY},r)}))}return o(e,n),o}function Kl(e,t,n,i,r){const s=n.motifs[t].bitmap;let o=e;function a(l){l.pX==o.pX&&l.pY==o.pY||(o=l,i("editMotif",{bitmap:s.rect({x:e.pX,y:e.pY},{x:o.pX,y:o.pY},r),motifID:t}))}return a(e),a}function Zl(e,t,n,i,r){const s=n.motifs[t].bitmap;let o=e;function a(l){l.pX==o.pX&&l.pY==o.pY||(o=l,i("editMotif",{bitmap:s.line({x:e.pX,y:e.pY},{x:o.pX,y:o.pY},r),motifID:t}))}return a(e),a}const Jl={line:Zl,brush:Wl,flood:Gl,rect:Kl};function Ql(e,t,n){const i=jn(e);let r=null;function s(o){let a=e.getBoundingClientRect();return{pX:Math.floor((o.clientX-a.left)/t.panZoom.scale()/t.scale[0]),pY:Math.floor((o.clientY-a.top)/t.panZoom.scale()/t.scale[1]),cX:o.clientX,cY:o.clientY}}i("pointerdown","",o=>{o.preventDefault();const a=o.button===0?0:1,l=n(s(o),a);l&&(r=c=>{l(s(c))})}),i("pointermove","",o=>{if(o.preventDefault(),o.buttons==0){r=null;return}r&&r(o)})}function jl(e,t,n,i){const r=t.motifs[e].bitmap,s=r.width,o=r.height;return st`<div class="size">
    <div
      class="input-spinner"
      @click=${()=>n("resizeMotif",[s-1,o,e],i)}>
      <i class="fa-solid fa-minus fa-2xs fa-fw"></i>
    </div>
    <input
      type="text"
      inputmode="numeric"
      min="1"
      step="1"
      id="width"
      @change=${a=>n("resizeMotif",[Number(a.target.value),o,e],i)}
      value=${s} />
    <div
      class="input-spinner"
      @click=${()=>n("resizeMotif",[s+1,o,e],i)}>
      <i class="fa-solid fa-plus fa-2xs fa-fw"></i>
    </div>
    <span>by</span>
    <div
      class="input-spinner"
      @click=${()=>n("resizeMotif",[s,o-1,e],i)}>
      <i class="fa-solid fa-minus fa-2xs fa-fw"></i>
    </div>
    <input
      type="text"
      inputmode="numeric"
      min="1"
      step="1"
      @change=${a=>n("resizeMotif",[s,Number(a.target.value),e],i)}
      value=${o} />
    <div
      class="input-spinner"
      @click=${()=>n("resizeMotif",[s,o+1,e],i)}>
      <i class="fa-solid fa-plus fa-2xs fa-fw"></i>
    </div>
  </div>`}function tc(e,t){return st`
    <div class="tool-group">
      <div
        class="tool-select ${e=="brush"?"selected":"not-selected"}"
        @click=${()=>t("brush")}>
        <i class="fa-solid fa-paintbrush"></i>
      </div>
      <div
        class="tool-select ${e=="flood"?"selected":"not-selected"}"
        @click=${()=>t("flood")}>
        <i class="fa-solid fa-fill-drip"></i>
      </div>
      <div
        class="tool-select ${e=="rect"?"selected":"not-selected"}"
        @click=${()=>t("rect")}>
        <i class="fa-solid fa-vector-square"></i>
      </div>
      <div
        class="tool-select ${e=="line"?"selected":"not-selected"}"
        @click=${()=>t("line")}>
        <i class="fa-solid fa-minus"></i>
      </div>
      <div
        class="tool-select ${e=="pan"?"selected":"not-selected"}"
        @click=${()=>t("pan")}>
        <i class="fa-solid fa-up-down-left-right"></i>
      </div>
    </div>
  `}class ec{constructor(t,n,i,r){this.parentEl=t,this.canvasEl=null,this.motifID=n,this.dispatch=r,this.paneState={activeTool:"brush",activeColor:0,panZoom:null,scale:i.motifs[this.motifID].palette.scale},this.renderView(i),this.canvasContainer=this.parentEl.querySelectorAll(":scope > .canvas-container")[0],this.canvasEl=this.parentEl.getElementsByClassName("bitmap-canvas")[0],this.paneState.panZoom=ql(this.canvasContainer,this.paneState);const s=i.motifs[this.motifID],o=s.bitmap,a=s.palette;this.paneState.panZoom.setScaleXY({x:[0,o.width*a.scale[0]],y:[0,o.height*a.scale[1]]});const l=(c,h)=>{let f=Jl[this.paneState.activeTool];if(!f)return;let d=f(c,this.motifID,i,r,h);if(d)return u=>d(u,i)};Ql(this.canvasEl,this.paneState,l)}renderView(t){yt(this.view(t),this.parentEl)}center(t){let n=t.motifs[this.motifID];this.paneState.panZoom.setScaleXY({x:[0,n.bitmap.width*n.palette.scale[0]],y:[0,n.bitmap.height*n.palette.scale[1]]})}view(t){return st` <div class="canvas-container">
        <canvas class="bitmap-canvas transform-group"></canvas>
      </div>
      <div class="toolbar">
        ${tc(this.paneState.activeTool,n=>{this.paneState.activeTool=n,this.renderView(t)})}
        ${jl(this.motifID,t,this.dispatch,this.center.bind(this))}
      </div>`}sync(t){let n=t.motifs[this.motifID];n.bimpCanvas.updateOffscreenCanvas(n.bitmap,n.palette),n.bimpCanvas.transferOffscreenToCanvas(this.canvasEl)}}const nc={sizes:[30,70],children:[{sizes:[80,20],children:["motif0","download"]},["preview"]]},ve={motif0:"motif",download:"download",simulation:"simulation",preview:"preview"},ic={motif:ec,empty:Xl,simulation:Vl,color:Fl,preview:Ul,download:Yl},qn=new U(24,20,xr.triangle),St={title:"untitled",history:[],motifs:{motif0:{bitmap:qn,palette:bt,bimpCanvas:new ze(qn,bt)}},simulation:{currentTarget:["motifs","motif0"],PARAMS:{yarnWidth:6,hDist:10,vDist:12}},motifCounter:1};yt(st`
    <!-- <div id="sidebar"></div> -->
    <div id="container"></div>
  `,document.body);const rc=document.getElementById("container");document.getElementById("sidebar");const Bi=new rr(nc,rc,on,Ui);function Ui(e,t,n){n&&(ve[t]=new ic[n](document.getElementById(e),t,St,qi))}async function qi(e,t,n){try{const{changes:i,postRender:r}=Tr[e](St,t,qi);Object.assign(St,i),on(),r&&r(),n&&n(St)}catch(i){console.error(`Problem in action ${e}`),console.error(i)}}function on(){Object.entries(Bi.paneMap).forEach(([e,t])=>{ve[t].sync(St),ve[t].renderView(St)})}function sc(){Object.entries(Bi.paneMap).forEach(([e,t])=>{Ui(e,t,ve[t])}),on()}window.onload=sc;
